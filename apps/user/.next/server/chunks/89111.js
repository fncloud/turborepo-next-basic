"use strict";exports.id=89111,exports.ids=[89111],exports.modules={16634:(e,s,r)=>{r.d(s,{A:()=>f});var t=r(42725),n=r(42605),a=r(83702),i=r(90971),c=r(23963),l=r(37637),d=r(75164),o=r(17979),u=r(81888),m=r(45685),x=r(91616);let p=({clientSecret:e,onError:s})=>{let r=(0,n.t2)(),{theme:a,systemTheme:m}=(0,u.D)(),p=(0,n.HH)(),[h,f]=(0,x.useState)(!1),[j,g]=(0,x.useState)(!1),[y,v]=(0,x.useState)({}),[b,N]=(0,x.useState)(""),_=(0,o.useTranslations)("payment.stripe.card"),w={base:{fontSize:"16px",color:"dark"===("system"===a?m:a)?"#fff":"#000","::placeholder":{color:"#aab7c4"}},invalid:{color:"#EF4444",iconColor:"#EF4444"}},C=(e,s)=>{e.error?v(r=>({...r,[s]:e.error.message})):v(e=>({...e,[s]:void 0}))},E=async t=>{if(t.preventDefault(),!r||!p){s(_("loading"));return}if(!b.trim()){v(e=>({...e,name:_("name_required")}));return}f(!0);let a=p.getElement(n._D),i=p.getElement(n.qs),c=p.getElement(n.JG);if(!a||!i||!c){s(_("element_error")),f(!1);return}let{error:l,paymentIntent:d}=await r.confirmCardPayment(e,{payment_method:{card:a,billing_details:{name:b}}});l?s(l.message||_("payment_failed")):d&&"succeeded"===d.status?g(!0):s(_("processing")),f(!1)};return(0,t.jsx)("form",{onSubmit:E,children:j?(0,t.jsxs)("div",{className:"py-6 text-center",children:[(0,t.jsx)("div",{className:"mb-4 flex justify-center",children:(0,t.jsx)(d.A,{className:"h-12 w-12 text-green-500"})}),(0,t.jsx)("p",{className:"text-xl font-medium",children:_("success_title")}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:_("success_message")})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(l.J,{htmlFor:"cardholderName",className:"text-sm font-medium",children:_("card_name")}),(0,t.jsx)(c.p,{id:"cardholderName",type:"text",value:b,onChange:e=>N(e.target.value),placeholder:_("name_placeholder"),className:y.name?"border-destructive":""}),y.name&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:y.name})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(l.J,{htmlFor:"cardNumber",className:"text-sm font-medium",children:_("card_number")}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${y.cardNumber?"border-red-500":""}`,children:(0,t.jsx)(n._D,{id:"cardNumber",options:{style:w,showIcon:!0},onChange:e=>C(e,"cardNumber")})})}),y.cardNumber&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:y.cardNumber})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(l.J,{htmlFor:"cardExpiry",className:"text-sm font-medium",children:_("expiry_date")}),(0,t.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${y.cardExpiry?"border-red-500":""}`,children:(0,t.jsx)(n.qs,{id:"cardExpiry",options:{style:w},onChange:e=>C(e,"cardExpiry")})}),y.cardExpiry&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:y.cardExpiry})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(l.J,{htmlFor:"cardCvc",className:"text-sm font-medium",children:_("security_code")}),(0,t.jsx)("div",{className:`focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ${y.cardCvc?"border-red-500":""}`,children:(0,t.jsx)(n.JG,{id:"cardCvc",options:{style:w},onChange:e=>C(e,"cardCvc")})}),y.cardCvc&&(0,t.jsx)("p",{className:"text-destructive text-xs",children:y.cardCvc})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[(0,t.jsx)(i.$,{type:"submit",disabled:h||!r||!p,className:"w-full",children:h?_("processing_button"):_("pay_button")}),(0,t.jsx)("p",{className:"text-muted-foreground text-center text-xs",children:_("secure_notice")})]})]})})},h=({client_secret:e,method:s})=>{let r=(0,n.t2)(),[a,i]=(0,x.useState)(null),[c,l]=(0,x.useState)(null),[d,u]=(0,x.useState)(!1),h=(0,o.useTranslations)("payment.stripe"),f=(0,x.useCallback)(e=>{i(e),u(!1)},[]),j=(0,x.useCallback)(async()=>r?"alipay"===s?await r.confirmAlipayPayment(e,{return_url:window.location.href},{handleActions:!1}):"wechat_pay"===s?await r.confirmWechatPayPayment(e,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1}):null:(f(h("card.loading")),null),[e,s,r,f,h]),g=(0,x.useCallback)(async()=>{if(!d&&"card"!==s){u(!0);try{let e=await j();if(!e)return;let{error:r,paymentIntent:t}=e;if(r)return f(r.message);if(t?.status==="requires_action"){let e=t.next_action,r="alipay"===s?e?.alipay_handle_redirect?.url:e?.wechat_pay_display_qr_code?.image_url_svg;l(r||null)}}catch(e){f(h("error"))}}},[j,d,f,s,h]);return(0,x.useEffect)(()=>{g()},[g]),"card"===s?(0,t.jsx)("div",{className:"min-w-80 text-left",children:(0,t.jsx)(p,{clientSecret:e,onError:f})}):c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.X,{value:c,size:208,imageSettings:{src:`/payment/${s}.svg`,width:24,height:24,excavate:!0}}),(0,t.jsx)("p",{className:"text-muted-foreground mt-4 text-center",children:h(`qrcode.${s}`)})]}):a},f=({method:e,client_secret:s,publishable_key:r})=>{let i=(0,x.useMemo)(()=>(0,a.c)(r),[r]);return(0,t.jsx)(n.S8,{stripe:i,children:(0,t.jsx)(h,{method:e,client_secret:s})})}},41622:(e,s,r)=>{r.d(s,{M:()=>c});var t=r(42725),n=r(39204),a=r(53302),i=r(17979);function c({order:e}){let s=(0,i.useTranslations)("subscribe");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold",children:s("billing.billingTitle")}),(0,t.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[e?.type&&[1,2].includes(e?.type)&&(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.duration")}),(0,t.jsxs)("span",{children:[e?.quantity||1," ",s(e?.unit_time||"Month")]})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.price")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:e?.price||e?.unit_price})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.productDiscount")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:e?.discount})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.couponDiscount")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:e?.coupon_discount})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.fee")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:e?.fee_amount})})]})]}),(0,t.jsx)(a.w,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("billing.total")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"currency",value:e?.amount})})]})]})}},29956:(e,s,r)=>{r.d(s,{_:()=>i});var t=r(42725),n=r(39204),a=r(17979);function i({subscribe:e}){let s=(0,a.useTranslations)("subscribe.detail");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"font-semibold",children:s("productDetail")}),(0,t.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[e?.name&&(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:e?.name}),(0,t.jsxs)("span",{children:["x ",(0,t.jsx)("span",{children:e?.quantity||1})]})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("availableTraffic")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"traffic",value:e?.traffic,unlimited:!0})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("connectionSpeed")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{type:"trafficSpeed",value:e?.speed_limit,unlimited:!0})})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:s("connectedDevices")}),(0,t.jsx)("span",{children:(0,t.jsx)(n.n,{value:e?.device_limit,type:"number",unlimited:!0})})]})]})]})}},90842:(e,s,r)=>{r.d(s,{E:()=>c});var t=r(42725),n=r(7918);r(91616);var a=r(27681);let i=(0,n.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,...r}){return(0,t.jsx)("div",{className:(0,a.cn)(i({variant:s}),e),...r})}}};