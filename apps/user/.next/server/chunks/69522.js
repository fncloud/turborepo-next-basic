"use strict";exports.id=69522,exports.ids=[69522],exports.modules={69522:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var n=t(42725),a=t(39204),r=t(42748),i=t(64957),l=t(90971),d=t(10965),c=t(53302),o=t(54289),u=t(27876),x=t(27681),m=t(17979),f=t(91616),p=t(27437),h=t(29956),b=t(25206),g=t(56497),j=t(36312),v=t(83369),y=t(27300),N=t(72711),w=t(41290),C=t(70207),q=t(41622);function T({subscribe:e,setSubscribe:s}){let t=(0,m.useTranslations)("subscribe"),{getUserInfo:a}=(0,v.A)(),r=(0,C.useRouter)(),[o,u]=(0,f.useState)({quantity:1,subscribe_id:0,payment:-1,coupon:""}),[x,p]=(0,f.useTransition)(),{data:T}=(0,i.I)({enabled:!!e?.id,queryKey:["preCreateOrder",o],queryFn:async()=>{let{data:s}=await (0,y.mB)({...o,subscribe_id:e?.id});return s.data}}),_=(0,f.useCallback)((e,s)=>{u(t=>({...t,[e]:s}))},[]),F=(0,f.useCallback)(async()=>{p(async()=>{try{let e=await (0,y.Ov)(o),s=e.data.data?.order_no;s&&(a(),r.push(`/payment?order_no=${s}`))}catch(e){}})},[o,r,a]);return(0,n.jsx)(N.Dialog,{open:!!e?.id,onOpenChange:e=>{e||s(void 0)},children:(0,n.jsxs)(N.DialogContent,{className:"flex h-full max-w-screen-lg flex-col overflow-hidden border-none p-0 md:h-auto",children:[(0,n.jsx)(N.DialogHeader,{className:"p-6 pb-0",children:(0,n.jsx)(N.DialogTitle,{children:t("buySubscription")})}),(0,n.jsxs)("div",{className:"grid w-full flex-grow gap-3 overflow-auto p-6 pt-0 lg:grid-cols-2",children:[(0,n.jsx)(d.Zp,{className:"border-transparent shadow-none md:border-inherit md:shadow",children:(0,n.jsxs)(d.Wu,{className:"grid gap-3 p-0 text-sm md:p-6",children:[(0,n.jsx)(h._,{subscribe:{...e,quantity:o.quantity}}),(0,n.jsx)(c.w,{}),(0,n.jsx)(q.M,{order:{...T,quantity:o.quantity,unit_price:e?.unit_price}})]})}),(0,n.jsxs)("div",{className:"flex flex-col justify-between text-sm",children:[(0,n.jsxs)("div",{className:"mb-6 grid gap-3",children:[(0,n.jsx)(g.A,{quantity:o.quantity,unitTime:e?.unit_time,discounts:e?.discount,onChange:e=>{_("quantity",e)}}),(0,n.jsx)(b.A,{coupon:o.coupon,onChange:e=>_("coupon",e)}),(0,n.jsx)(j.A,{value:o.payment,onChange:e=>{_("payment",e)}})]}),(0,n.jsxs)(l.$,{className:"fixed bottom-0 left-0 w-full rounded-none md:relative md:mt-6",disabled:x,onClick:F,children:[x&&(0,n.jsx)(w.A,{className:"mr-2 animate-spin"}),t("buyNow")]})]})]})]})})}function _(){let e=(0,m.useTranslations)("subscribe"),[s,t]=(0,f.useState)(),[b,g]=(0,f.useState)(""),{data:j}=(0,i.I)({queryKey:["querySubscribeGroupList"],queryFn:async()=>{let{data:e}=await (0,r.AN)();return e.data?.list||[]}}),{data:v}=(0,i.I)({queryKey:["querySubscribeList"],queryFn:async()=>{let{data:e}=await (0,r.xo)();return e.data?.list||[]}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.tU,{value:b,onValueChange:g,className:"space-y-4",children:[j&&j.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-muted-foreground w-full",children:e("category")}),(0,n.jsxs)(o.j7,{children:[(0,n.jsx)(o.Xi,{value:"",children:e("all")}),j.map(e=>(0,n.jsx)(o.Xi,{value:String(e.id),children:e.name},e.id))]}),(0,n.jsx)("h2",{className:"text-muted-foreground w-full",children:e("products")})]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:v?.filter(e=>!b||e.group_id===Number(b))?.map(s=>n.jsxs(d.Zp,{className:"flex flex-col",children:[n.jsx(d.aR,{className:"bg-muted/50 text-xl font-medium",children:s.name}),n.jsxs(d.Wu,{className:"flex flex-grow flex-col gap-3 p-6 *:!text-sm",children:[n.jsx("ul",{className:"flex flex-grow flex-col gap-3",children:(()=>{let e;try{e=JSON.parse(s.description)}catch{e={description:"",features:[]}}let{description:t,features:a}=e;return n.jsxs(n.Fragment,{children:[t&&n.jsx("li",{className:"text-muted-foreground",children:t}),a?.map((e,s)=>n.jsxs("li",{className:x.cn("flex items-center gap-1",{"text-muted-foreground line-through":"destructive"===e.type}),children:[e.icon&&n.jsx(u.Icon,{icon:e.icon,className:x.cn("text-primary size-5",{"text-green-500":"success"===e.type,"text-destructive":"destructive"===e.type})}),e.label]},s))]})})()}),n.jsx(h._,{subscribe:{...s,name:void 0}})]}),n.jsx(c.w,{}),n.jsxs(d.wL,{className:"relative mt-2 flex flex-col gap-2",children:[n.jsxs("h2",{className:"pb-5 text-2xl font-semibold sm:text-3xl",children:[n.jsx(a.n,{type:"currency",value:s.unit_price}),n.jsxs("span",{className:"text-base font-medium",children:["/",e(s.unit_time||"Month")]})]}),n.jsx(l.$,{className:"absolute bottom-0 w-full rounded-b-xl rounded-t-none",onClick:()=>{t(s)},children:e("buy")})]})]},s.id))}),v?.length===0&&(0,n.jsx)(p.Empty,{})]}),(0,n.jsx)(T,{subscribe:s,setSubscribe:t})]})}},41622:(e,s,t)=>{t.d(s,{M:()=>l});var n=t(42725),a=t(39204),r=t(53302),i=t(17979);function l({order:e}){let s=(0,i.useTranslations)("subscribe");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:s("billing.billingTitle")}),(0,n.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[e?.type&&[1,2].includes(e?.type)&&(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.duration")}),(0,n.jsxs)("span",{children:[e?.quantity||1," ",s(e?.unit_time||"Month")]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.price")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"currency",value:e?.price||e?.unit_price})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.productDiscount")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"currency",value:e?.discount})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.couponDiscount")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"currency",value:e?.coupon_discount})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.fee")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"currency",value:e?.fee_amount})})]})]}),(0,n.jsx)(r.w,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.total")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"currency",value:e?.amount})})]})]})}},25206:(e,s,t)=>{t.d(s,{A:()=>i});var n=t(42725),a=t(23963),r=t(17979);t(91616);let i=({coupon:e,onChange:s})=>{let t=(0,r.useTranslations)("subscribe");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:t("coupon")}),(0,n.jsx)(a.p,{placeholder:t("enterCoupon"),value:e,onChange:e=>s(e.target.value.trim())})]})}},29956:(e,s,t)=>{t.d(s,{_:()=>i});var n=t(42725),a=t(39204),r=t(17979);function i({subscribe:e}){let s=(0,r.useTranslations)("subscribe.detail");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:s("productDetail")}),(0,n.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[e?.name&&(0,n.jsxs)("li",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:e?.name}),(0,n.jsxs)("span",{children:["x ",(0,n.jsx)("span",{children:e?.quantity||1})]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("availableTraffic")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"traffic",value:e?.traffic,unlimited:!0})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("connectionSpeed")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{type:"trafficSpeed",value:e?.speed_limit,unlimited:!0})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("connectedDevices")}),(0,n.jsx)("span",{children:(0,n.jsx)(a.n,{value:e?.device_limit,type:"number",unlimited:!0})})]})]})]})}},56497:(e,s,t)=>{t.d(s,{A:()=>c});var n=t(42725),a=t(90842),r=t(37637),i=t(87828),l=t(17979),d=t(91616);let c=({quantity:e,unitTime:s="Month",discounts:t=[],onChange:c})=>{let o=(0,l.useTranslations)("subscribe"),u=(0,d.useCallback)(e=>{c(Number(e))},[c]),x=({value:e,label:s})=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.C,{value:e,id:e,className:"peer sr-only"}),(0,n.jsx)(r.J,{htmlFor:e,className:"border-muted bg-popover hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary relative flex h-full flex-col items-center justify-center gap-2 rounded-md border-2 p-2",children:s})]}),m=t?.find(s=>s.quantity===e)?.discount,f=m?100-m:0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:o("purchaseDuration")}),(0,n.jsxs)(i.z,{value:String(e),onValueChange:u,className:"flex flex-wrap gap-3",children:["Minute"!==s&&(0,n.jsx)(x,{value:"1",label:`1 / ${o(s)}`}),t?.map(e=>n.jsx(x,{value:String(e.quantity),label:`${e.quantity} / ${o(s)}`},e.quantity))]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"text-muted-foreground text-sm",children:[o("discountInfo"),":"]}),f>0?(0,n.jsxs)(a.E,{variant:"destructive",className:"h-6 text-sm",children:["-",f,"% ",o("discount")]}):(0,n.jsx)("span",{className:"text-muted-foreground h-6 text-sm",children:"--"})]})]})}},42748:(e,s,t)=>{t.d(s,{AN:()=>r,xo:()=>i,z$:()=>a});var n=t(33479);async function a(e){return(0,n.A)("/v1/public/subscribe/application/config",{method:"GET",...e||{}})}async function r(e){return(0,n.A)("/v1/public/subscribe/group/list",{method:"GET",...e||{}})}async function i(e){return(0,n.A)("/v1/public/subscribe/list",{method:"GET",...e||{}})}},90842:(e,s,t)=>{t.d(s,{E:()=>l});var n=t(42725),a=t(7918);t(91616);var r=t(27681);let i=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return(0,n.jsx)("div",{className:(0,r.cn)(i({variant:s}),e),...t})}},54289:(e,s,t)=>{t.d(s,{tU:()=>A,av:()=>R,j7:()=>D,Xi:()=>S});var n=t(42725),a=t(91616),r=t(63095),i=t(76235),l=t(69132),d=t(2397),c=t(32713),o=t(6737),u=t(9689),x=t(85925),m="Tabs",[f,p]=(0,i.A)(m,[l.RG]),h=(0,l.RG)(),[b,g]=f(m),j=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:d,activationMode:m="automatic",...f}=e,p=(0,o.jH)(d),[h,g]=(0,u.i)({prop:a,onChange:r,defaultProp:i});return(0,n.jsx)(b,{scope:t,baseId:(0,x.B)(),value:h,onValueChange:g,orientation:l,dir:p,activationMode:m,children:(0,n.jsx)(c.sG.div,{dir:p,"data-orientation":l,...f,ref:s})})});j.displayName=m;var v="TabsList",y=a.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...r}=e,i=g(v,t),d=h(t);return(0,n.jsx)(l.bL,{asChild:!0,...d,orientation:i.orientation,dir:i.dir,loop:a,children:(0,n.jsx)(c.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});y.displayName=v;var N="TabsTrigger",w=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:i=!1,...d}=e,o=g(N,t),u=h(t),x=T(o.baseId,a),m=_(o.baseId,a),f=a===o.value;return(0,n.jsx)(l.q7,{asChild:!0,...u,focusable:!i,active:f,children:(0,n.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":m,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:x,...d,ref:s,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;f||i||!e||o.onValueChange(a)})})})});w.displayName=N;var C="TabsContent",q=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:r,forceMount:i,children:l,...o}=e,u=g(C,t),x=T(u.baseId,r),m=_(u.baseId,r),f=r===u.value,p=a.useRef(f);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,n.jsx)(d.C,{present:i||f,children:({present:t})=>(0,n.jsx)(c.sG.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!t,id:m,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:t&&l})})});function T(e,s){return`${e}-trigger-${s}`}function _(e,s){return`${e}-content-${s}`}q.displayName=C;var F=t(27681);let A=j,D=a.forwardRef(({className:e,...s},t)=>(0,n.jsx)(y,{ref:t,className:(0,F.cn)("bg-muted text-muted-foreground inline-flex h-9 items-center justify-center rounded-lg p-1",e),...s}));D.displayName=y.displayName;let S=a.forwardRef(({className:e,...s},t)=>(0,n.jsx)(w,{ref:t,className:(0,F.cn)("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow",e),...s}));S.displayName=w.displayName;let R=a.forwardRef(({className:e,...s},t)=>(0,n.jsx)(q,{ref:t,className:(0,F.cn)("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",e),...s}));R.displayName=q.displayName}};