(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8502],{63234:(e,t,n)=>{Promise.resolve().then(n.bind(n,44646))},44646:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var s=n(54568),r=n(7688),l=n(92247),a=n(5591),i=n(915),d=n(46359),o=n(69539),c=n(7620),u=n(1165),m=n(60906),f=n(94453);function p(){let e=(0,o.useTranslations)("wallet"),{user:t}=(0,a.A)(),n=(0,c.useRef)(null),p=((null==t?void 0:t.balance)||0)+((null==t?void 0:t.commission)||0)+((null==t?void 0:t.gift_amount)||0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Zp,{className:"mb-4",children:(0,s.jsxs)(d.Wu,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-foreground mb-4 text-2xl font-bold",children:e("assetOverview")}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e("totalAssets")}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:(0,s.jsx)(r.n,{type:"currency",value:p})})]}),(0,s.jsx)(m.A,{})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"bg-secondary rounded-lg p-4 shadow-sm transition-all duration-300 hover:shadow-md",children:[(0,s.jsx)("p",{className:"text-secondary-foreground text-sm font-medium opacity-80",children:e("balance")}),(0,s.jsx)("p",{className:"text-secondary-foreground text-2xl font-bold",children:(0,s.jsx)(r.n,{type:"currency",value:null==t?void 0:t.balance})})]}),(0,s.jsxs)("div",{className:"bg-secondary rounded-lg p-4 shadow-sm transition-all duration-300 hover:shadow-md",children:[(0,s.jsx)("p",{className:"text-secondary-foreground text-sm font-medium opacity-80",children:e("giftAmount")}),(0,s.jsx)("p",{className:"text-secondary-foreground text-2xl font-bold",children:(0,s.jsx)(r.n,{type:"currency",value:null==t?void 0:t.gift_amount})})]}),(0,s.jsxs)("div",{className:"bg-secondary rounded-lg p-4 shadow-sm transition-all duration-300 hover:shadow-md",children:[(0,s.jsx)("p",{className:"text-secondary-foreground text-sm font-medium opacity-80",children:e("commission")}),(0,s.jsx)("p",{className:"text-secondary-foreground text-2xl font-bold",children:(0,s.jsx)(r.n,{type:"currency",value:null==t?void 0:t.commission})})]})]})]})}),(0,s.jsx)(l.o,{action:n,request:async(e,t)=>{var n,s;let r=await (0,i.KL)({...e,...t});return{list:(null===(n=r.data.data)||void 0===n?void 0:n.list)||[],total:(null===(s=r.data.data)||void 0===s?void 0:s.total)||0}},renderItem:t=>(0,s.jsx)(d.Zp,{className:"overflow-hidden",children:(0,s.jsx)(d.Wu,{className:"p-3 text-sm",children:(0,s.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:flex-col lg:grid-cols-4",children:[(0,s.jsxs)("li",{className:"font-semibold",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e("createdAt")}),(0,s.jsx)("time",{children:(0,f.Yq)(t.created_at)})]}),(0,s.jsxs)("li",{className:"font-semibold",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e("type.0")}),(0,s.jsx)("span",{children:e("type.".concat(t.type))})]}),(0,s.jsxs)("li",{className:"font-semibold",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e("amount")}),(0,s.jsx)("span",{children:(0,s.jsx)(r.n,{type:"currency",value:t.amount})})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e("balance")}),(0,s.jsx)("span",{children:(0,s.jsx)(r.n,{type:"currency",value:t.balance})})]})]})})}),empty:(0,s.jsx)(u.Empty,{})})]})}},81148:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var s=n(54568),r=n(99278),l=n(12468),a=n(24721),i=n(98372),d=n(49773),o=n(69539),c=n(41870);let u=(0,n(7620).memo)(e=>{let{value:t,onChange:n,balance:u=!0}=e,m=(0,o.useTranslations)("subscribe"),{data:f}=(0,l.I)({queryKey:["getAvailablePaymentMethods",{balance:u}],queryFn:async()=>{var e,t;let{data:s}=await (0,r.md)(),l=(null===(e=s.data)||void 0===e?void 0:e.list)||[],a=u?l:l.filter(e=>-1!==e.id),i=null===(t=a.find(e=>e.id))||void 0===t?void 0:t.id;return i&&n(i),a}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-semibold",children:m("paymentMethod")}),(0,s.jsx)(i.z,{className:"grid grid-cols-2 gap-2 md:grid-cols-5",value:String(t),onValueChange:e=>{console.log(e),n(Number(e))},children:null==f?void 0:f.map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.C,{value:String(e.id),id:String(e.id),className:"absolute inset-0 z-10 h-full w-full cursor-pointer opacity-0"}),(0,s.jsxs)(a.J,{htmlFor:String(e.id),className:(0,d.cn)("border-muted bg-popover hover:bg-accent hover:text-accent-foreground flex flex-col items-center justify-between rounded-md border-2 py-2",String(t)===String(e.id)?"border-primary":""),children:[(0,s.jsx)("div",{className:"mb-3 size-12",children:(0,s.jsx)(c.default,{src:e.icon||"/payment/balance.svg",width:48,height:48,alt:e.name})}),(0,s.jsx)("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap text-center",children:e.name})]})]},e.id))})]})})},60906:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var s=n(54568),r=n(5591),l=n(71552),a=n(26525),i=n(79045),d=n(55146),o=n(94453),c=n(16399),u=n(69539),m=n(3311),f=n(7620),p=n(81148);function x(e){let t=(0,u.useTranslations)("subscribe"),{common:n}=(0,r.A)(),{currency:x}=n,h=(0,m.useRouter)(),[j,v]=(0,f.useState)(!1),[y,b]=(0,f.useTransition)(),[g,N]=(0,f.useState)({amount:0,payment:1});return(0,s.jsxs)(i.Dialog,{open:j,onOpenChange:v,children:[(0,s.jsx)(i.zM,{asChild:!0,children:(0,s.jsx)(a.$,{...e,children:t("recharge")})}),(0,s.jsxs)(i.DialogContent,{className:"flex h-full flex-col overflow-hidden md:h-auto",children:[(0,s.jsxs)(i.DialogHeader,{children:[(0,s.jsx)(i.DialogTitle,{children:t("balanceRecharge")}),(0,s.jsx)(i.rr,{children:t("rechargeDescription")})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between text-sm",children:[(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsx)("div",{className:"font-semibold",children:t("rechargeAmount")}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)(d.z,{type:"number",placeholder:t("enterAmount"),min:0,value:g.amount,formatInput:e=>(0,o.tJ)("centsToDollars",e),formatOutput:e=>(0,o.tJ)("dollarsToCents",e),onValueChange:e=>{N(t=>({...t,amount:e}))},prefix:x.currency_symbol,suffix:x.currency_unit})}),(0,s.jsx)(p.A,{balance:!1,value:g.payment,onChange:e=>N({...g,payment:e})})]}),(0,s.jsxs)(a.$,{className:"fixed bottom-0 left-0 w-full rounded-none md:relative md:mt-6",disabled:y||!g.amount,onClick:()=>{b(async()=>{try{var e;let t=await (0,l.Q3)(g),n=null===(e=t.data.data)||void 0===e?void 0:e.order_no;n&&(h.push("/payment?order_no=".concat(n)),v(!1))}catch(e){}})},children:[y&&(0,s.jsx)(c.A,{className:"mr-2 animate-spin"}),t("rechargeNow")]})]})]})]})}},71552:(e,t,n)=>{"use strict";n.d(t,{Bf:()=>c,FM:()=>a,IF:()=>l,Ov:()=>d,Pj:()=>r,Q3:()=>o,T9:()=>u,mB:()=>i});var s=n(34050);async function r(e,t){return(0,s.A)("/v1/public/order/close",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function l(e,t){return(0,s.A)("/v1/public/order/detail",{method:"GET",params:{...e},...t||{}})}async function a(e,t){return(0,s.A)("/v1/public/order/list",{method:"GET",params:{...e},...t||{}})}async function i(e,t){return(0,s.A)("/v1/public/order/pre",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function d(e,t){return(0,s.A)("/v1/public/order/purchase",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function o(e,t){return(0,s.A)("/v1/public/order/recharge",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function c(e,t){return(0,s.A)("/v1/public/order/renewal",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function u(e,t){return(0,s.A)("/v1/public/order/reset",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}},65470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let s=n(7620);function r(e,t){let n=(0,s.useRef)(()=>{}),r=(0,s.useRef)(()=>{});return(0,s.useMemo)(()=>e&&t?s=>{null===s?(n.current(),r.current()):(n.current=l(e,s),r.current=l(t,s))}:e||t,[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},98372:(e,t,n)=>{"use strict";n.d(t,{C:()=>o,z:()=>d});var s=n(54568),r=n(47375),l=n(59126),a=n(7620),i=n(49773);let d=a.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(r.bL,{className:(0,i.cn)("grid gap-2",n),...l,ref:t})});d.displayName=r.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)(r.q7,{ref:t,className:(0,i.cn)("border-primary text-primary focus-visible:ring-ring aspect-square h-4 w-4 rounded-full border shadow focus:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",n),...a,children:(0,s.jsx)(r.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(l.A,{className:"fill-primary h-3.5 w-3.5"})})})});o.displayName=r.q7.displayName},55146:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var s=n(54568),r=n(47019),l=n(49773),a=n(7620);function i(e){let{suffix:t,prefix:n,formatInput:i,formatOutput:d,value:o,className:c,onValueChange:u,onValueBlur:m,...f}=e,p=e=>{if(""===e||0===e||"0"===e)return"";let t=String(null!=e?e:"");return i?i(t):t},[x,h]=(0,a.useState)(()=>p(o)),[j,v]=(0,a.useState)(null!=o?o:"");(0,a.useEffect)(()=>{if(o!==j){let e=p(o);x!==e&&(h(e),v(null!=o?o:""))}},[o,i]);let y=e=>{let t=null==e?void 0:e.toString().trim();return"0"===t&&"number"===f.type?0:(t&&"number"===f.type&&(t=Number(t)),d?d(t):t)};return(0,s.jsxs)("div",{className:(0,l.cn)("border-input flex w-full items-center overflow-hidden rounded-md border",c),suppressHydrationWarning:!0,children:["string"==typeof n?(0,s.jsx)("div",{className:"bg-muted relative mr-px flex h-9 items-center text-nowrap px-3",children:n}):n,(0,s.jsx)(r.p,{step:.01,...f,value:x,className:"block rounded-none border-none",onChange:e=>{let t=e.target.value;if("number"===f.type){if("0"===t){h(""),v(0),null==u||u(0);return}if(/^-?\d*\.?\d*$/.test(t)||"-"===t||"."===t){let e=Number(t);if(isNaN(e)||"-"===t||"."===t)v(t);else{let n=Math.max(Number.isFinite(f.min)?f.min:-1/0,Math.min(Number.isFinite(f.max)?f.max:1/0,e));t=String(n),v(n)}h("0"===t?"":t)}}else h(t),v(t);let n=y(t);null==u||u(n)},onBlur:()=>{if("number"===f.type&&x){if("-"===x||"."===x){h(""),v(""),null==m||m("");return}if("0"===x){h(""),null==m||m(0);return}}let e=y(x);(o||"")!==e&&(null==m||m(e))}}),"string"==typeof t?(0,s.jsx)("div",{className:"bg-muted relative ml-px flex h-9 items-center text-nowrap px-3",children:t}):t]})}},50672:(e,t,n)=>{"use strict";n.d(t,{v:()=>d});var s=n(7620);let r=e=>{let t;let n=new Set,s=(e,s)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,l={setState:s,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(s,r,l);return l},l=e=>e?r(e):r,a=e=>e,i=e=>{let t=l(e),n=e=>(function(e,t=a){let n=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},d=e=>e?i(e):i}},e=>{var t=t=>e(e.s=t);e.O(0,[7503,2249,5627,4999,5215,2468,728,9683,6577,4258,4638,3135,734,4690,4305,475,587,2855,7358],()=>t(63234)),_N_E=e.O()}]);