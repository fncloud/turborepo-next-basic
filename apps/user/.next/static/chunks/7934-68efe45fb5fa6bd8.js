"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7934],{8332:(e,r,s)=>{s.d(r,{A:()=>f});var n=s(54568),t=s(78607),a=s(82209),i=s(26525),l=s(47019),c=s(24721),d=s(73085),o=s(69539),u=s(59598),m=s(63085),x=s(7620);let p=e=>{let{clientSecret:r,onError:s}=e,a=(0,t.useStripe)(),{theme:m,systemTheme:p}=(0,u.D)(),h=(0,t.useElements)(),[f,v]=(0,x.useState)(!1),[j,y]=(0,x.useState)(!1),[g,b]=(0,x.useState)({}),[N,_]=(0,x.useState)(""),w=(0,o.useTranslations)("payment.stripe.card"),E={base:{fontSize:"16px",color:"dark"===("system"===m?p:m)?"#fff":"#000","::placeholder":{color:"#aab7c4"}},invalid:{color:"#EF4444",iconColor:"#EF4444"}},C=(e,r)=>{e.error?b(s=>({...s,[r]:e.error.message})):b(e=>({...e,[r]:void 0}))},S=async e=>{if(e.preventDefault(),!a||!h){s(w("loading"));return}if(!N.trim()){b(e=>({...e,name:w("name_required")}));return}v(!0);let n=h.getElement(t.CardNumberElement),i=h.getElement(t.CardExpiryElement),l=h.getElement(t.CardCvcElement);if(!n||!i||!l){s(w("element_error")),v(!1);return}let{error:c,paymentIntent:d}=await a.confirmCardPayment(r,{payment_method:{card:n,billing_details:{name:N}}});c?s(c.message||w("payment_failed")):d&&"succeeded"===d.status?y(!0):s(w("processing")),v(!1)};return(0,n.jsx)("form",{onSubmit:S,children:j?(0,n.jsxs)("div",{className:"py-6 text-center",children:[(0,n.jsx)("div",{className:"mb-4 flex justify-center",children:(0,n.jsx)(d.A,{className:"h-12 w-12 text-green-500"})}),(0,n.jsx)("p",{className:"text-xl font-medium",children:w("success_title")}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:w("success_message")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(c.J,{htmlFor:"cardholderName",className:"text-sm font-medium",children:w("card_name")}),(0,n.jsx)(l.p,{id:"cardholderName",type:"text",value:N,onChange:e=>_(e.target.value),placeholder:w("name_placeholder"),className:g.name?"border-destructive":""}),g.name&&(0,n.jsx)("p",{className:"text-destructive text-xs",children:g.name})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(c.J,{htmlFor:"cardNumber",className:"text-sm font-medium",children:w("card_number")}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardNumber?"border-red-500":""),children:(0,n.jsx)(t.CardNumberElement,{id:"cardNumber",options:{style:E,showIcon:!0},onChange:e=>C(e,"cardNumber")})})}),g.cardNumber&&(0,n.jsx)("p",{className:"text-destructive text-xs",children:g.cardNumber})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(c.J,{htmlFor:"cardExpiry",className:"text-sm font-medium",children:w("expiry_date")}),(0,n.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardExpiry?"border-red-500":""),children:(0,n.jsx)(t.CardExpiryElement,{id:"cardExpiry",options:{style:E},onChange:e=>C(e,"cardExpiry")})}),g.cardExpiry&&(0,n.jsx)("p",{className:"text-destructive text-xs",children:g.cardExpiry})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(c.J,{htmlFor:"cardCvc",className:"text-sm font-medium",children:w("security_code")}),(0,n.jsx)("div",{className:"focus-within:border-primary focus-within:ring-primary rounded-md border p-3 focus-within:ring-1 ".concat(g.cardCvc?"border-red-500":""),children:(0,n.jsx)(t.CardCvcElement,{id:"cardCvc",options:{style:E},onChange:e=>C(e,"cardCvc")})}),g.cardCvc&&(0,n.jsx)("p",{className:"text-destructive text-xs",children:g.cardCvc})]})]})]}),(0,n.jsxs)("div",{className:"mt-6 flex flex-col space-y-4",children:[(0,n.jsx)(i.$,{type:"submit",disabled:f||!a||!h,className:"w-full",children:f?w("processing_button"):w("pay_button")}),(0,n.jsx)("p",{className:"text-muted-foreground text-center text-xs",children:w("secure_notice")})]})]})})},h=e=>{let{client_secret:r,method:s}=e,a=(0,t.useStripe)(),[i,l]=(0,x.useState)(null),[c,d]=(0,x.useState)(null),[u,h]=(0,x.useState)(!1),f=(0,o.useTranslations)("payment.stripe"),v=(0,x.useCallback)(e=>{l(e),h(!1)},[]),j=(0,x.useCallback)(async()=>a?"alipay"===s?await a.confirmAlipayPayment(r,{return_url:window.location.href},{handleActions:!1}):"wechat_pay"===s?await a.confirmWechatPayPayment(r,{payment_method_options:{wechat_pay:{client:"web"}}},{handleActions:!1}):null:(v(f("card.loading")),null),[r,s,a,v,f]),y=(0,x.useCallback)(async()=>{if(!u&&"card"!==s){h(!0);try{let n=await j();if(!n)return;let{error:t,paymentIntent:a}=n;if(t)return v(t.message);if((null==a?void 0:a.status)==="requires_action"){var e,r;let n=a.next_action,t="alipay"===s?null==n?void 0:null===(e=n.alipay_handle_redirect)||void 0===e?void 0:e.url:null==n?void 0:null===(r=n.wechat_pay_display_qr_code)||void 0===r?void 0:r.image_url_svg;d(t||null)}}catch(e){v(f("error"))}}},[j,u,v,s,f]);return(0,x.useEffect)(()=>{y()},[y]),"card"===s?(0,n.jsx)("div",{className:"min-w-80 text-left",children:(0,n.jsx)(p,{clientSecret:r,onError:v})}):c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.X,{value:c,size:208,imageSettings:{src:"/payment/".concat(s,".svg"),width:24,height:24,excavate:!0}}),(0,n.jsx)("p",{className:"text-muted-foreground mt-4 text-center",children:f("qrcode.".concat(s))})]}):i},f=e=>{let{method:r,client_secret:s,publishable_key:i}=e,l=(0,x.useMemo)(()=>(0,a.c)(i),[i]);return(0,n.jsx)(t.Elements,{stripe:l,children:(0,n.jsx)(h,{method:r,client_secret:s})})}},32442:(e,r,s)=>{s.d(r,{M:()=>l});var n=s(54568),t=s(7688),a=s(63002),i=s(69539);function l(e){let{order:r}=e,s=(0,i.useTranslations)("subscribe");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:s("billing.billingTitle")}),(0,n.jsxs)("ul",{className:"grid grid-cols-2 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[(null==r?void 0:r.type)&&[1,2].includes(null==r?void 0:r.type)&&(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.duration")}),(0,n.jsxs)("span",{children:[(null==r?void 0:r.quantity)||1," ",s((null==r?void 0:r.unit_time)||"Month")]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.price")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"currency",value:(null==r?void 0:r.price)||(null==r?void 0:r.unit_price)})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.productDiscount")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"currency",value:null==r?void 0:r.discount})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.couponDiscount")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"currency",value:null==r?void 0:r.coupon_discount})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.fee")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"currency",value:null==r?void 0:r.fee_amount})})]})]}),(0,n.jsx)(a.w,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between font-semibold",children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("billing.total")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"currency",value:null==r?void 0:r.amount})})]})]})}},38434:(e,r,s)=>{s.d(r,{_:()=>i});var n=s(54568),t=s(7688),a=s(69539);function i(e){let{subscribe:r}=e,s=(0,a.useTranslations)("subscribe.detail");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-semibold",children:s("productDetail")}),(0,n.jsxs)("ul",{className:"grid grid-cols-1 gap-3 *:flex *:items-center *:justify-between lg:grid-cols-1",children:[(null==r?void 0:r.name)&&(0,n.jsxs)("li",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-muted-foreground line-clamp-2 flex-1",children:null==r?void 0:r.name}),(0,n.jsxs)("span",{children:["x ",(0,n.jsx)("span",{children:(null==r?void 0:r.quantity)||1})]})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("availableTraffic")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"traffic",value:null==r?void 0:r.traffic,unlimited:!0})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("connectionSpeed")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{type:"trafficSpeed",value:null==r?void 0:r.speed_limit,unlimited:!0})})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"text-muted-foreground",children:s("connectedDevices")}),(0,n.jsx)("span",{children:(0,n.jsx)(t.n,{value:null==r?void 0:r.device_limit,type:"number",unlimited:!0})})]})]})]})}},50622:(e,r,s)=>{s.d(r,{E:()=>l});var n=s(54568),t=s(13686);s(7620);var a=s(49773);let i=(0,t.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:s,...t}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:s}),r),...t})}},63002:(e,r,s)=>{s.d(r,{w:()=>l});var n=s(54568),t=s(24861),a=s(7620),i=s(49773);let l=a.forwardRef((e,r)=>{let{className:s,orientation:a="horizontal",decorative:l=!0,...c}=e;return(0,n.jsx)(t.b,{ref:r,decorative:l,orientation:a,className:(0,i.cn)("bg-border shrink-0","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...c})});l.displayName=t.b.displayName},44488:(e,r,s)=>{s.d(r,{Icon:()=>a});var n=s(54568),t=s(19463);function a(e){return(0,n.jsx)(t.In,{...e})}}}]);